<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1023px" preserveAspectRatio="none" style="width:472px;height:1023px;" version="1.1" viewBox="0 0 472 1023" width="472px" zoomAndPan="magnify"><defs><filter height="300%" id="f14o097qvlvww2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="207" cy="20" fill="#000000" filter="url(#f14o097qvlvww2)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#f14o097qvlvww2)" height="194.8906" style="stroke: #000000; stroke-width: 2.0;" width="200" x="107" y="40"/><path d="M240,41 L240,50.6094 L230,60.6094 L107,60.6094 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="110" y="55.5332">Reader initialization</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="157.5" y="77.6094"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="167.5" y="100.0664">register plugin</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="159.5" y="132.7031"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="169.5" y="155.1602">get SE reader</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="117" y="187.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="127" y="210.2539">prepare SE selection request</text><polygon fill="#FEFECE" filter="url(#f14o097qvlvww2)" points="162.5,254.8906,251.5,254.8906,263.5,266.8906,251.5,278.8906,162.5,278.8906,150.5,266.8906,162.5,254.8906" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="162.5" y="271.3916">transaction mode?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="71.5" y="264.4736">explicit selection</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="263.5" y="264.4736">default selection</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="32" y="288.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="42" y="311.3477">test SE presence</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="10" y="358.9844"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="20" y="381.4414">process explicit selection</text><rect fill="#FFFFFF" filter="url(#f14o097qvlvww2)" height="209.8906" style="stroke: #000000; stroke-width: 2.0;" width="249" x="200.5" y="288.8906"/><path d="M439.5,289.8906 L439.5,299.5 L429.5,309.5 L200.5,309.5 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="229" x="203.5" y="304.4238">Observer: observable reader setting</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="230.5" y="326.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="169" x="240.5" y="348.957">default selection reader setting</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="230.5" y="396.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="169" x="240.5" y="419.0508">reader notification subscribtion</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="264" y="451.6875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="274" y="474.1445">"wait SE detection"</text><rect fill="#000000" filter="url(#f14o097qvlvww2)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="216" x="217" y="508.7813"/><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="257.5" y="534.7813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="267.5" y="557.2383">polling SE presence)</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="281.5" y="579.875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="291.5" y="602.332">SE insertion</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="246" y="634.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="256" y="657.4258">process default selection</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="188" x="231" y="690.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168" x="241" y="712.5195">notifies SE inserted &amp; selected</text><rect fill="#000000" filter="url(#f14o097qvlvww2)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="216" x="217" y="735.1563"/><rect fill="#FFFFFF" filter="url(#f14o097qvlvww2)" height="84.7031" style="stroke: #000000; stroke-width: 2.0;" width="273.5" x="188" y="751.7324"/><path d="M452,752.7324 L452,762.3418 L442,772.3418 L188,772.3418 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="254" x="191" y="767.2656">Observer: reader notification processing</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="238" y="789.3418"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="248" y="811.7988">process selection response</text><polygon fill="#FEFECE" filter="url(#f14o097qvlvww2)" points="207,842.4355,219,854.4355,207,866.4355,195,854.4355,207,842.4355" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="154" y="886.4355"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="164" y="908.8926">get selected SE</text><rect fill="#FEFECE" filter="url(#f14o097qvlvww2)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="106" y="977.6182"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="182" x="116" y="1000.0752">send APDU commands to the SE</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="207" x2="207" y1="112.7031" y2="132.7031"/><polygon fill="#A80036" points="203,122.7031,207,132.7031,211,122.7031,207,126.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="207" x2="207" y1="167.7969" y2="187.7969"/><polygon fill="#A80036" points="203,177.7969,207,187.7969,211,177.7969,207,181.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="207" x2="207" y1="30" y2="77.6094"/><polygon fill="#A80036" points="203,67.6094,207,77.6094,211,67.6094,207,71.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="89" x2="89" y1="323.9844" y2="358.9844"/><polygon fill="#A80036" points="85,348.9844,89,358.9844,93,348.9844,89,352.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="325" y1="361.5938" y2="396.5938"/><polygon fill="#A80036" points="321,386.5938,325,396.5938,329,386.5938,325,390.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="325" y1="431.6875" y2="451.6875"/><polygon fill="#A80036" points="321,441.6875,325,451.6875,329,441.6875,325,445.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="325" y1="614.9688" y2="634.9688"/><polygon fill="#A80036" points="321,624.9688,325,634.9688,329,624.9688,325,628.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="325" y1="670.0625" y2="690.0625"/><polygon fill="#A80036" points="321,680.0625,325,690.0625,329,680.0625,325,684.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="325" y1="514.7813" y2="534.7813"/><polygon fill="#A80036" points="321,524.7813,325,534.7813,329,524.7813,325,528.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="325" y1="741.1563" y2="789.3418"/><polygon fill="#A80036" points="321,779.3418,325,789.3418,329,779.3418,325,783.3418" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="150.5" x2="89" y1="266.8906" y2="266.8906"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="89" x2="89" y1="266.8906" y2="288.8906"/><polygon fill="#A80036" points="85,278.8906,89,288.8906,93,278.8906,89,282.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="263.5" x2="325" y1="266.8906" y2="266.8906"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="325" y1="266.8906" y2="326.5"/><polygon fill="#A80036" points="321,316.5,325,326.5,329,316.5,325,320.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="89" x2="89" y1="394.0781" y2="854.4355"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="89" x2="195" y1="854.4355" y2="854.4355"/><polygon fill="#A80036" points="185,850.4355,195,854.4355,185,858.4355,189,854.4355" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="325" y1="824.4355" y2="854.4355"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="219" y1="854.4355" y2="854.4355"/><polygon fill="#A80036" points="229,850.4355,219,854.4355,229,858.4355,225,854.4355" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="207" x2="207" y1="222.8906" y2="254.8906"/><polygon fill="#A80036" points="203,244.8906,207,254.8906,211,244.8906,207,248.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="207" x2="207" y1="866.4355" y2="886.4355"/><polygon fill="#A80036" points="203,876.4355,207,886.4355,211,876.4355,207,880.4355" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.5; stroke-dasharray: 7.0,7.0;" x1="207" x2="207" y1="921.5293" y2="977.6182"/><polygon fill="#008000" points="203,967.6182,207,977.6182,211,967.6182,207,971.6182" style="stroke: #008000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="211" y="943.8652">Then specific operations could</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="217" y="957.7012">be processed with the SE...</text><!--MD5=[ab4762b7151f16faeade9ef757dd381a]
@startuml
start
partition "Reader initialization" {
	:register plugin;
	:get SE reader;
	:prepare SE selection request;
}

if (transaction mode?) then (explicit selection)
	:test SE presence;
	:process explicit selection;
else (default selection)
	partition "Observer: observable reader setting" {
	:default selection reader setting;
	:reader notification subscribtion;
	:"wait SE detection";
	}
	detach
	fork
		:polling SE presence);
		detach
		:SE insertion;
		:process default selection;
		:notifies SE inserted & selected;
	end fork
	detach
	partition "Observer: reader notification processing" {
		:process selection response;
	}
endif
	:get selected SE;
-[#green,dashed]-> Then specific operations could
  be processed with the SE...;
	:send APDU commands to the SE;
@enduml

PlantUML version 1.2020.07(Sun Apr 19 15:42:40 MUT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+8-b765.40
Operating System: Windows 10
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>